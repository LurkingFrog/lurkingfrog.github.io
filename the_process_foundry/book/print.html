<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>The Process Foundry</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item "><a href="core/index.html"><strong aria-hidden="true">2.</strong> Core</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="core/architecture.html"><strong aria-hidden="true">2.1.</strong> Architecture</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="core/application.html"><strong aria-hidden="true">2.1.1.</strong> Application</a></li><li class="chapter-item "><a href="core/container.html"><strong aria-hidden="true">2.1.2.</strong> Container</a></li><li class="chapter-item "><a href="core/workflow.html"><strong aria-hidden="true">2.1.3.</strong> Workflow</a></li><li class="chapter-item "><a href="core/flux.html"><strong aria-hidden="true">2.1.4.</strong> Data Flow</a></li></ol></li><li class="chapter-item "><a href="core/api.html"><strong aria-hidden="true">2.2.</strong> API</a></li></ol></li><li class="chapter-item "><a href="gui/index.html"><strong aria-hidden="true">3.</strong> GUI</a></li><li class="chapter-item "><a href="tools/index.html"><strong aria-hidden="true">4.</strong> Tools</a></li><li class="chapter-item "><a href="apps/index.html"><strong aria-hidden="true">5.</strong> Applications</a></li><li class="chapter-item "><a href="systems/index.html"><strong aria-hidden="true">6.</strong> Systems</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="systems/ELK.html"><strong aria-hidden="true">6.1.</strong> ELK Stack</a></li><li class="chapter-item "><a href="systems/Taiga.html"><strong aria-hidden="true">6.2.</strong> Taiga</a></li><li class="chapter-item "><a href="systems/FishheadLabs.html"><strong aria-hidden="true">6.3.</strong> Fishhead Labs</a></li></ol></li><li class="chapter-item "><a href="workflow/index.html"><strong aria-hidden="true">7.</strong> Workflows</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="workflow/pg_basebackup.html"><strong aria-hidden="true">7.1.</strong> Continuous Backup</a></li><li class="chapter-item "><a href="workflow/rebuilder.html"><strong aria-hidden="true">7.2.</strong> Rebuilder</a></li><li class="chapter-item "><a href="workflow/invoicing.html"><strong aria-hidden="true">7.3.</strong> Invoicing</a></li></ol></li><li class="chapter-item "><a href="glossary.html"><strong aria-hidden="true">8.</strong> Glossary</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">The Process Foundry</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#the-process-foundry" id="the-process-foundry">The Process Foundry</a></h1>
<p>Welcome to The Process Foundry (TPF), a business process model and notation (BPMN) based microservice
framework.</p>
<p>Be warned, like all frameworks it will suck. Read ahead to see if it can be made to suck less for you.</p>
<p>The goal of this projects is to create a backbone to implement inter-process communications between disparate
processes on so the developer can focus on their code rather than digging into every niggling decision that
goes into a microservice.</p>
<p>It is designed to be composable, but with sane defaults that the dev will never even know about unless
they go looking.</p>
<h2><a class="header" href="#ideas-to-mull-over" id="ideas-to-mull-over">Ideas to mull over</a></h2>
<p>THINK: Is it worth creating a book preprocessor to scan the code for ToDo listing to include RFC/ToDos with
links to project management in the book?
THINK: Does Github's project management offer enough to use (even temporarily?)</p>
<h2><a class="header" href="#todo" id="todo">ToDo</a></h2>
<ul>
<li>Add project management tool to contain bugs/feature requests</li>
<li>CODE REVIEW for documentation</li>
<li>Refactor into multiple projects and squash into a proper initial commit</li>
<li>Design workflows
<ul>
<li>Review Luigi/Airflow docs for ideas</li>
</ul>
</li>
<li>Implement watcher.sh as TPF workflow (dog-fooding)
<ul>
<li>Create iNotify Application</li>
<li>Emit file touched event</li>
<li>Does workflow actually do anything after triggering, or does it just configure pub/sub and disappear?</li>
<li>Review choreography vs orchestration</li>
</ul>
</li>
<li>Add ELK stack as a system in order to enable logging</li>
<li>Create TPF GUI
<ul>
<li>Research compiling WebAssembly container/cache and wrapping it in JavaScript</li>
<li>Is Kibana useful here, since it claims to be a dashboard/insight manager?</li>
</ul>
</li>
</ul>
<h1><a class="header" href="#core" id="core">Core</a></h1>
<p>This is the bare minimum needed to run the process foundry. It consists of the action/event aggregator,
message bus, and shell containers. Most everything else is optional or considered a tool that can
be used everywhere.</p>
<p>TODO: Add list, links and blurbs to the architecture.</p>
<h1><a class="header" href="#architecture" id="architecture">Architecture</a></h1>
<p>This is the top level design of The Process Foundry. Read the sub-headings to learn more about the individual
components.</p>
<h1><a class="header" href="#application" id="application">Application</a></h1>
<p>An application is an interface which defines a set of functions to convert TPF actions into native commands,
monitor state, and sends out messages describing any changes in state.</p>
<p>At its core, an application is something that executes actions and emits events. It has no context of anything
outside the scope of its functionality. It can be accessed by one or more containers, depending on the
context.</p>
<p>A primary example of this is the user shell</p>
<p>TODO: Add component/function design png</p>
<h1><a class="header" href="#container" id="container">Container</a></h1>
<p>A container is an introspective object that holds a set of applications and other containers (hooray for
recursive definitions). It is used to organize its children and route events/actions to the next step
in both directions, up to the message bus/router, and down to the &quot;bare metal&quot;. This is what will enable
app discovery.</p>
<p>TODO: Add PNG of docker-compose example or should this wait until workflows?:</p>
<ul>
<li>docker-compose -&gt; docker-container -&gt; shell -&gt; pg_basebackup</li>
<li>iNotify -&gt; docker-compose -&gt; docker-container -&gt; shell</li>
</ul>
<h1><a class="header" href="#workflow" id="workflow">Workflow</a></h1>
<p>Status: Thinking through</p>
<p>A workflow is a set of actions to run based on a specific change in state. It should be choreography rather
than orchestration. The bulk of this is going to be to adding routing to make sure events get to the next
proper step. It should be started with a single trigger and using routing to follow to subsequent events instead
of having a process listener waiting for result before sending the next step. I'm not sure this is possible,
but I'm damn well going to try.</p>
<p>TODO: Examine Luigi/Airflow for how they do things
TODO: Workflow design doc
TODO: Workflow example</p>
<h1><a class="header" href="#data-flow" id="data-flow">Data Flow</a></h1>
<p>The dataflow in this system is designed to be unidirectional. An action will will generate an ack event with
the message id. Results are pushed onto the router as multiple applications may care about the result even
though, only a single action was triggered. This simplifies handling state changes and maintaining a cache.</p>
<p>Web pages should also be treated as an equal container, receiving events and updates for realtime data syncing.
The idea is to compile a WebAssembly module and wrap it in JS so web users will be treated as equal to onsite
containers/applications. This hopefully keep the codebase with bug fixes up to date without having to manage
multiple programming languages.</p>
<p>I'm basing this off the idea of <a href="https://facebook.github.io/flux/docs/in-depth-overview/">Flux</a></p>
<p>TODO: Add example data flow for the watcher/rebuilder workflow</p>
<h1><a class="header" href="#api" id="api">API</a></h1>
<p>Since this is a microservice framework, the bus will be exposed and secured by OAuth2 and have a queryable
JSON schema for all available functions. The goal is to have 3rd party apps able to act as first class
citizens.</p>
<h1><a class="header" href="#gui" id="gui">GUI</a></h1>
<p>status: Concept/ToDo</p>
<p>THINK: Kibana as a base for insight?</p>
<p>This is going to be able to give insight/management into all the systems known by TPF. First get the
core backbone running before even considering what we would want to see.</p>
<p>TODO: Workflow management (editing, running)
TODO: Role/ACL management</p>
<h1><a class="header" href="#tools" id="tools">Tools</a></h1>
<h1><a class="header" href="#applications" id="applications">Applications</a></h1>
<p>The <a href="apps/../core/application.html">application</a> is an interface used for wrapping externally code. Here are some
examples and how they are used.</p>
<p>TODO: Core::Shell (Bash, Zsh, Dash)
TODO: Add QuickBooks API interface</p>
<h1><a class="header" href="#systems" id="systems">Systems</a></h1>
<p>This is a set of applications that are run together to perform a particular function. These are
going to be predefined configurations for quick and easy deployment and management. In addition, they should
add on pre-designed workflows for common usages.</p>
<h1><a class="header" href="#elk-stack" id="elk-stack">ELK Stack</a></h1>
<p>That's Elasticsearch, Kibana, Beats, and Logstash (also known as the ELK Stack). Reliably and securely take data from any source, in any format, then search, analyze, and visualize it in real time.</p>
<p>This is going to be the default lagging mechanism for The Process Foundry, so I'm including it as since we
can install the whole thing in a Docker Compose/MiniKube instance.</p>
<p>To see more about it: <a href="https://www.elastic.co/elastic-stack">Elastic Stack</a></p>
<h1><a class="header" href="#taiga" id="taiga">Taiga</a></h1>
<h1><a class="header" href="#fishhead-labs" id="fishhead-labs">Fishhead Labs</a></h1>
<p>My old company, still running under my sister. It is a full service veterinary pathology consulting firm. The
company's internal management website is built upon TPF (such as it is).</p>
<h1><a class="header" href="#workflows" id="workflows">Workflows</a></h1>
<h1><a class="header" href="#continuous-backup" id="continuous-backup">Continuous Backup</a></h1>
<h1><a class="header" href="#rebuilder" id="rebuilder">Rebuilder</a></h1>
<h1><a class="header" href="#invoicing" id="invoicing">Invoicing</a></h1>
<h1><a class="header" href="#glossary" id="glossary">Glossary</a></h1>
<ul>
<li><strong>Container</strong></li>
<li><strong>Application</strong></li>
<li><strong>RBAC (Role Based Access Control)</strong></li>
<li><strong>ACL (Access Control List)</strong></li>
<li><strong>Encryption</strong></li>
<li><strong>Message Queue</strong></li>
<li><strong>Factory</strong></li>
<li><strong>OAuth2</strong></li>
<li><strong>ELK Stack</strong></li>
<li><strong>Registry</strong></li>
<li><strong>Router</strong></li>
<li><strong>Wrapi</strong></li>
<li><strong>Long Poller</strong></li>
<li><strong>System</strong> This is a set of applications that are run together to perform a particular function. A good example is the
<a href="./systems/ELK.html">ELK Stack</a>.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
